require 'lib/spec_thor'
dtk_nested_require("../lib/domain","response")
dtk_nested_require("../lib/view_processor","table_print")
include SpecThor

describe DTK::Client::Response do
	# before{
	#   @hash = {"data"=>[{"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147507731, "nodes"=>[{"components"=>["hdp-hadoop::smoketest_hdfs", "hdp-hadoop::datanode", "hdp-hadoop::tasktracker", "hdp", "hdp-hadoop::namenode-conn", "stdlib"], "node_id"=>2147507717, "node_name"=>"HADOOP-slave01"}, {"components"=>["hdp-hadoop::namenode", "hdp", "stdlib", "hdp-hadoop::jobtracker"], "node_id"=>2147507725, "node_name"=>"HADOOP-NN-JT"}], "display_name"=>"abh::R8-C5-HADOOP"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147506303, "nodes"=>[{"components"=>["hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147506290, "node_name"=>"HADOOP-NN-JT"}, {"components"=>["hdp-hadoop::namenode-conn", "hdp-hadoop::datanode", "hdp", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147506296, "node_name"=>"HADOOP-slave01"}], "display_name"=>"abh::R8-CS-HADOOP"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147506141, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147506134, "node_name"=>"HADOOP-slave01"}], "display_name"=>"abh::R8-CS-HADOOP_slave"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505988, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "hdp-hbase::zk-conn", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505961, "node_name"=>"HBASE-slave01"}, {"components"=>["hdp-hbase::master", "hdp", "hdp-hbase::zk-conn", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147505978, "node_name"=>"HBASE-NN-JT-HM"}, {"components"=>["hdp", "stdlib", "hdp-zookeeper"], "node_id"=>2147505973, "node_name"=>"HBASE-ZK"}], "display_name"=>"abh::R8-CS-HBASE"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147506008, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "hdp-hbase::zk-conn", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505996, "node_name"=>"HBASE-slave01"}], "display_name"=>"abh::R8-CS-HBASE_slave"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505734, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib"], "node_id"=>2147505728, "node_name"=>"HDFS-slave01"}, {"components"=>["hdp", "stdlib", "hdp-hadoop::namenode"], "node_id"=>2147505723, "node_name"=>"HDFS-NN"}], "display_name"=>"abh::R8-CS-HDFS"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505743, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib"], "node_id"=>2147505737, "node_name"=>"HDFS-slave01"}], "display_name"=>"abh::R8-CS-HDFS_slave"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505230, "nodes"=>[{"components"=>["hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147505224, "node_name"=>"HADOOP-NN-JT"}, {"components"=>["hdp-hadoop::datanode", "hdp", "hdp-hadoop::namenode-conn", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147505217, "node_name"=>"HADOOP-slave01"}], "display_name"=>"abh::R8-RH-HADOOP"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505240, "nodes"=>[{"components"=>["hdp-hadoop::datanode", "hdp", "hdp-hadoop::namenode-conn", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147505233, "node_name"=>"HADOOP-slave01"}], "display_name"=>"abh::R8-RH-HADOOP_slave"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505617, "nodes"=>[{"components"=>["hdp", "stdlib", "hdp-zookeeper"], "node_id"=>2147505612, "node_name"=>"HBASE-ZK"}, {"components"=>["hdp-hadoop::namenode-conn", "hdp-hbase::zk-conn", "hdp-hadoop::datanode", "hdp", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505590, "node_name"=>"HBASE-slave01"}, {"components"=>["hdp-hbase::master", "hdp-hbase::zk-conn", "hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147505602, "node_name"=>"HBASE-NN-JT-HM"}], "display_name"=>"abh::R8-RH-HBASE"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505637, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp-hbase::zk-conn", "hdp-hadoop::datanode", "hdp", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505625, "node_name"=>"HBASE-slave01"}], "display_name"=>"abh::R8-RH-HBASE_slave"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505200, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib"], "node_id"=>2147505194, "node_name"=>"HDFS-slave01"}, {"components"=>["hdp", "stdlib", "hdp-hadoop::namenode"], "node_id"=>2147505189, "node_name"=>"HDFS-NN"}], "display_name"=>"abh::R8-RH-HDFS"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147505356, "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp-hadoop::datanode", "hdp", "stdlib"], "node_id"=>2147505350, "node_name"=>"HDFS-slave01"}], "display_name"=>"abh::R8-RH-HDFS_slave"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147508641, "nodes"=>[{"components"=>["hdp-hadoop::tasktracker", "hdp-hadoop::datanode", "hdp-hadoop::namenode-conn", "hdp", "stdlib"], "node_id"=>2147508634, "node_name"=>"HADOOP-slave01"}, {"components"=>["hdp-hadoop::smoketest_hdfs", "hdp-hadoop::namenode", "hdp", "stdlib", "hdp-hadoop::jobtracker"], "node_id"=>2147508627, "node_name"=>"HADOOP-NN-JT"}], "display_name"=>"abh::centos_hadoop_smoke"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147508533, "nodes"=>[{"components"=>["hdp-hadoop::tasktracker", "hdp-hadoop::datanode", "hdp-hadoop::namenode-conn", "hdp", "stdlib"], "node_id"=>2147508519, "node_name"=>"HADOOP-slave01"}, {"components"=>["hdp-hadoop::jobtracker", "hdp-hadoop::smoketest_hdfs", "hdp-hadoop::namenode", "hdp", "stdlib"], "node_id"=>2147508526, "node_name"=>"HADOOP-NN-JT"}], "display_name"=>"abh::hadoop_smoke"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147508831, "nodes"=>[{"components"=>["hdp-hbase::master-conn", "hdp-hadoop::datanode", "hdp-hbase::zk-conn", "hdp-hadoop::tasktracker", "hdp", "hdp-hadoop::namenode-conn", "stdlib", "hdp-hbase::regionserver"], "node_id"=>2147508819, "node_name"=>"HBASE-slave01"}, {"components"=>["hdp-hadoop::namenode", "hdp-hadoop::smoketest_hdfs", "hdp-hbase::master", "hdp-hbase::zk-conn", "hdp", "stdlib", "hdp-hadoop::jobtracker"], "node_id"=>2147508808, "node_name"=>"HBASE-NN-JT-HM"}, {"components"=>["hdp-zookeeper", "hdp", "stdlib"], "node_id"=>2147508803, "node_name"=>"HBASE-ZK"}], "display_name"=>"abh::hbase_centos_smoke"}, {"execution_status"=>nil, "module_branch_id"=>2147485695, "id"=>2147493292, "nodes"=>[{"components"=>["hdp-hadoop::namenode", "hdp-hbase::master", "hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hbase::zk-conn"], "node_id"=>2147493278, "node_name"=>"master"}, {"components"=>["stdlib", "hdp-hadoop::namenode-conn", "hdp-hbase::regionserver", "hdp-hbase::master-conn", "hdp-hadoop::tasktracker", "hdp-hadoop::datanode", "hdp-zookeeper", "hdp"], "node_id"=>2147493259, "node_name"=>"slave"}, {"components"=>["hdp-hadoop::namenode-conn", "hdp-hadoop::client", "hdp-hadoop::smoketest_hdfs", "hdp", "stdlib"], "node_id"=>2147493271, "node_name"=>"client"}], "display_name"=>"abh::smoke"}], "status"=>"ok"}
	# 	# @response = DTK::Client::Response.new(:assembly, @hash)

	# 	# @response.render_table(:assembly)
	# 	# @a = @response.render_data.to_s
	# }

 #  it "render_table" do

 #    expected_table = <<-TABLE.unindent
	# 		+------------+--------------------------+--------+-------+------------+
	# 		| id         | assembly_name            | status | nodes | components |
	# 		+------------+--------------------------+--------+-------+------------+
	# 		| 2147507731 | abh::R8-C5-HADOOP        |        | 2     |            |
	# 		| 2147506303 | abh::R8-CS-HADOOP        |        | 2     |            |
	# 		| 2147506141 | abh::R8-CS-HADOOP_slave  |        | 1     |            |
	# 		| 2147505988 | abh::R8-CS-HBASE         |        | 3     |            |
	# 		| 2147506008 | abh::R8-CS-HBASE_slave   |        | 1     |            |
	# 		| 2147505734 | abh::R8-CS-HDFS          |        | 2     |            |
	# 		| 2147505743 | abh::R8-CS-HDFS_slave    |        | 1     |            |
	# 		| 2147505230 | abh::R8-RH-HADOOP        |        | 2     |            |
	# 		| 2147505240 | abh::R8-RH-HADOOP_slave  |        | 1     |            |
	# 		| 2147505617 | abh::R8-RH-HBASE         |        | 3     |            |
	# 		| 2147505637 | abh::R8-RH-HBASE_slave   |        | 1     |            |
	# 		| 2147505200 | abh::R8-RH-HDFS          |        | 2     |            |
	# 		| 2147505356 | abh::R8-RH-HDFS_slave    |        | 1     |            |
	# 		| 2147508641 | abh::centos_hadoop_smoke |        | 2     |            |
	# 		| 2147508533 | abh::hadoop_smoke        |        | 2     |            |
	# 		| 2147508831 | abh::hbase_centos_smoke  |        | 3     |            |
	# 		| 2147493292 | abh::smoke               |        | 3     |            |
	# 		+------------+--------------------------+--------+-------+------------+

	# 	17 rows in set
 #   TABLE

 #   @data = [{"execution_status"=>nil, "id"=>2147507731, "display_name"=>"abh::R8-C5-HADOOP", "nodes"=>[{"components"=>["hdp-hadoop::smoketest_hdfs", "hdp-hadoop::datanode", "hdp-hadoop::tasktracker", "hdp", "hdp-hadoop::namenode-conn", "stdlib"], "node_id"=>2147507717, "node_name"=>"HADOOP-slave01"}, {"components"=>["hdp-hadoop::namenode", "hdp", "stdlib", "hdp-hadoop::jobtracker"], "node_id"=>2147507725, "node_name"=>"HADOOP-NN-JT"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147506303, "display_name"=>"abh::R8-CS-HADOOP", "nodes"=>[{"components"=>["hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147506290, "node_name"=>"HADOOP-NN-JT"}, {"components"=>["hdp-hadoop::namenode-conn", "hdp-hadoop::datanode", "hdp", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147506296, "node_name"=>"HADOOP-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147506141, "display_name"=>"abh::R8-CS-HADOOP_slave", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147506134, "node_name"=>"HADOOP-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505988, "display_name"=>"abh::R8-CS-HBASE", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "hdp-hbase::zk-conn", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505961, "node_name"=>"HBASE-slave01"}, {"components"=>["hdp-hbase::master", "hdp", "hdp-hbase::zk-conn", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147505978, "node_name"=>"HBASE-NN-JT-HM"}, {"components"=>["hdp", "stdlib", "hdp-zookeeper"], "node_id"=>2147505973, "node_name"=>"HBASE-ZK"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147506008, "display_name"=>"abh::R8-CS-HBASE_slave", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "hdp-hbase::zk-conn", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505996, "node_name"=>"HBASE-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505734, "display_name"=>"abh::R8-CS-HDFS", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib"], "node_id"=>2147505728, "node_name"=>"HDFS-slave01"}, {"components"=>["hdp", "stdlib", "hdp-hadoop::namenode"], "node_id"=>2147505723, "node_name"=>"HDFS-NN"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505743, "display_name"=>"abh::R8-CS-HDFS_slave", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib"], "node_id"=>2147505737, "node_name"=>"HDFS-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505230, "display_name"=>"abh::R8-RH-HADOOP", "nodes"=>[{"components"=>["hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147505224, "node_name"=>"HADOOP-NN-JT"}, {"components"=>["hdp-hadoop::datanode", "hdp", "hdp-hadoop::namenode-conn", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147505217, "node_name"=>"HADOOP-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505240, "display_name"=>"abh::R8-RH-HADOOP_slave", "nodes"=>[{"components"=>["hdp-hadoop::datanode", "hdp", "hdp-hadoop::namenode-conn", "stdlib", "hdp-hadoop::tasktracker"], "node_id"=>2147505233, "node_name"=>"HADOOP-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505617, "display_name"=>"abh::R8-RH-HBASE", "nodes"=>[{"components"=>["hdp", "stdlib", "hdp-zookeeper"], "node_id"=>2147505612, "node_name"=>"HBASE-ZK"}, {"components"=>["hdp-hadoop::namenode-conn", "hdp-hbase::zk-conn", "hdp-hadoop::datanode", "hdp", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505590, "node_name"=>"HBASE-slave01"}, {"components"=>["hdp-hbase::master", "hdp-hbase::zk-conn", "hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hadoop::namenode"], "node_id"=>2147505602, "node_name"=>"HBASE-NN-JT-HM"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505637, "display_name"=>"abh::R8-RH-HBASE_slave", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp-hbase::zk-conn", "hdp-hadoop::datanode", "hdp", "stdlib", "hdp-hbase::regionserver", "hdp-hadoop::tasktracker", "hdp-hbase::master-conn"], "node_id"=>2147505625, "node_name"=>"HBASE-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505200, "display_name"=>"abh::R8-RH-HDFS", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp", "hdp-hadoop::datanode", "stdlib"], "node_id"=>2147505194, "node_name"=>"HDFS-slave01"}, {"components"=>["hdp", "stdlib", "hdp-hadoop::namenode"], "node_id"=>2147505189, "node_name"=>"HDFS-NN"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147505356, "display_name"=>"abh::R8-RH-HDFS_slave", "nodes"=>[{"components"=>["hdp-hadoop::namenode-conn", "hdp-hadoop::datanode", "hdp", "stdlib"], "node_id"=>2147505350, "node_name"=>"HDFS-slave01"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147508641, "display_name"=>"abh::centos_hadoop_smoke", "nodes"=>[{"components"=>["hdp-hadoop::tasktracker", "hdp-hadoop::datanode", "hdp-hadoop::namenode-conn", "hdp", "stdlib"], "node_id"=>2147508634, "node_name"=>"HADOOP-slave01"}, {"components"=>["hdp-hadoop::smoketest_hdfs", "hdp-hadoop::namenode", "hdp", "stdlib", "hdp-hadoop::jobtracker"], "node_id"=>2147508627, "node_name"=>"HADOOP-NN-JT"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147508533, "display_name"=>"abh::hadoop_smoke", "nodes"=>[{"components"=>["hdp-hadoop::tasktracker", "hdp-hadoop::datanode", "hdp-hadoop::namenode-conn", "hdp", "stdlib"], "node_id"=>2147508519, "node_name"=>"HADOOP-slave01"}, {"components"=>["hdp-hadoop::jobtracker", "hdp-hadoop::smoketest_hdfs", "hdp-hadoop::namenode", "hdp", "stdlib"], "node_id"=>2147508526, "node_name"=>"HADOOP-NN-JT"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147508831, "display_name"=>"abh::hbase_centos_smoke", "nodes"=>[{"components"=>["hdp-hbase::master-conn", "hdp-hadoop::datanode", "hdp-hbase::zk-conn", "hdp-hadoop::tasktracker", "hdp", "hdp-hadoop::namenode-conn", "stdlib", "hdp-hbase::regionserver"], "node_id"=>2147508819, "node_name"=>"HBASE-slave01"}, {"components"=>["hdp-hadoop::namenode", "hdp-hadoop::smoketest_hdfs", "hdp-hbase::master", "hdp-hbase::zk-conn", "hdp", "stdlib", "hdp-hadoop::jobtracker"], "node_id"=>2147508808, "node_name"=>"HBASE-NN-JT-HM"}, {"components"=>["hdp-zookeeper", "hdp", "stdlib"], "node_id"=>2147508803, "node_name"=>"HBASE-ZK"}], "module_branch_id"=>2147485695}, {"execution_status"=>nil, "id"=>2147493292, "display_name"=>"abh::smoke", "nodes"=>[{"components"=>["hdp-hadoop::namenode", "hdp-hbase::master", "hdp", "stdlib", "hdp-hadoop::jobtracker", "hdp-hbase::zk-conn"], "node_id"=>2147493278, "node_name"=>"master"}, {"components"=>["stdlib", "hdp-hadoop::namenode-conn", "hdp-hbase::regionserver", "hdp-hbase::master-conn", "hdp-hadoop::tasktracker", "hdp-hadoop::datanode", "hdp-zookeeper", "hdp"], "node_id"=>2147493259, "node_name"=>"slave"}, {"components"=>["hdp-hadoop::namenode-conn", "hdp-hadoop::client", "hdp-hadoop::smoketest_hdfs", "hdp", "stdlib"], "node_id"=>2147493271, "node_name"=>"client"}], "module_branch_id"=>2147485695}]
 #   @command_clazz = :assembly
 #   @data_type_clazz = "ASSEMBLY"

 #   @a = DTK::Client::ViewProcTablePrint.new("table_print", :assembly)
 #   @a.render(@data, @command_clazz, @data_type_clazz)
 #  end


end
